readme_content = r"""Сервис рассылок (Django)

Учебный проект по ТЗ: CRUD рассылок, клиентов и сообщений; лог попыток отправки; аутентификация с подтверждением email; профиль пользователя; роли (пользователь/менеджер); статистика; серверное и клиентское кеширование.

──────────────────────────────────────────────────────────────────────────────

Технологии
- Python 3.12
- Django 5.2.5
- PostgreSQL
- Redis (для кэша, опционально — можно LocMem)
- python-dotenv
- Pillow (аватарки пользователей)

──────────────────────────────────────────────────────────────────────────────

Возможности
- Клиенты/Сообщения/Рассылки — полный CRUD.
- Попытки рассылки (Attempt): дата/время, статус (Успешно/Неуспешно), ответ почтового сервера.
- Отправка рассылки “Сейчас” из интерфейса и через управленческую команду.
- Главная страница: количество всех рассылок, активных и уникальных получателей.
- Регистрация с подтверждением email, вход/выход, восстановление пароля.
- Профиль пользователя: просмотр и редактирование (email редактировать нельзя).
- Права доступа:
  - Пользователь — видит и управляет только своими объектами.
  - Менеджер — видит все объекты, но не редактирует чужие; может видеть список пользователей (по правам).
- Статистика: успешные/неуспешные попытки по рассылкам пользователя (аннотации).
- Кеширование: главная/статистика (micro-cache), безопасно для персональных страниц.

──────────────────────────────────────────────────────────────────────────────

Быстрый старт (локально)
1) Клонируйте репозиторий и установите зависимости:
   python -m venv .venv
   . .venv/Scripts/activate          # Windows PowerShell: .venv\Scripts\Activate.ps1
   pip install -r requirements.txt

2) Переменные окружения:
   Скопируйте .env.template → .env и заполните значениями:
     SECRET_KEY=...
     DEBUG=True
     DB_NAME=...
     DB_USER=...
     DB_PASSWORD=...
     DB_HOST=localhost
     DB_PORT=5432
     EMAIL_HOST=smtp.example.com
     EMAIL_PORT=587
     EMAIL_USE_TLS=True
     EMAIL_HOST_USER=you@example.com
     EMAIL_HOST_PASSWORD=app_password
     DEFAULT_FROM_EMAIL=you@example.com
     REDIS_URL=redis://127.0.0.1:6379/1   # если используете Redis

3) База и миграции:
   python manage.py migrate
   python manage.py createsuperuser

4) (Опционально) Redis для кэша:
   # Docker
   docker run -d --name redis -p 6379:6379 --restart unless-stopped redis:7 redis-server --save 60 1 --loglevel warning
   # Проверка: docker exec -it redis redis-cli ping  → PONG

   В settings.py укажите один из вариантов кэша:
   - Redis:
       CACHES = {
         "default": {
           "BACKEND": "django.core.cache.backends.redis.RedisCache",
           "LOCATION": "redis://127.0.0.1:6379/1",
         }
       }
   - Локальный (без Redis):
       CACHES = {
         "default": {
           "BACKEND": "django.core.cache.backends.locmem.LocMemCache",
           "LOCATION": "mailings-cache",
         }
       }

5) Создать группу «Менеджеры» и выдать права (однократно):
   python manage.py bootstrap_managers

6) Запуск сервера:
   python manage.py runserver
   Откройте http://127.0.0.1:8000/

──────────────────────────────────────────────────────────────────────────────

Команды
- Отправка рассылки по id:
    python manage.py send_mailing <mailing_id>

- Создание группы «Менеджеры» с нужными правами:
    python manage.py bootstrap_managers

──────────────────────────────────────────────────────────────────────────────

Структура основных приложений
- users
  - Модель пользователя (AUTH_USER_MODEL), логин по email.
  - Регистрация с email-подтверждением, вход/выход, восстановление пароля.
  - Профиль: Detail/Update (email — только для чтения).
- mailings
  - Client, Message, Mailing, Attempt (связи по ТЗ).
  - Поле owner у сущностей и фильтрация по владельцу во вьюхах.
  - Права менеджера: view_all_clients / view_all_messages / view_all_mailings / view_all_attempts.
  - Статистика: аннотации по попыткам (успех/неуспех), счётчики.
  - Кеширование: HomeView (публичный micro-cache) и StatsView (пер-пользователь через vary_on_cookie + private).

──────────────────────────────────────────────────────────────────────────────

Полезные заметки
- Если после логина вы “как будто не авторизованы” на главной — причиной может быть публичный кэш.
- Flake8:
    [flake8]
    max-line-length = 100
    extend-ignore = E203, W503
- requirements.txt должен содержать только используемые пакеты.

──────────────────────────────────────────────────────────────────────────────

Лицензия
Учебный проект. Используйте свободно в образовательных целях.
"""
